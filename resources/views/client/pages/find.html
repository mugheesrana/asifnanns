<style>
  .container {
    max-width: 600px;
    margin: 30px auto;
    background: #fff;
    border-radius: 10px;
    padding: 25px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }

  h2 {
    color: #333;
    text-align: center;
    margin-bottom: 15px;
  }

  .question {
    margin-bottom: 20px;
  }

  .question label {
    display: block;
    font-weight: 600;
    margin-bottom: 10px;
  }

  .options {
    display: flex;
    justify-content: space-between;
  }

  .options input {
    margin-right: 5px;
  }

  .buttons {
    display: flex;
    justify-content: space-between;
    margin-top: 20px;
  }

  button {
    background: #FF7101;
    color: #fff;
    border: none;
    padding: 10px 20px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: 0.2s;
  }

  button:hover {
    background: #e66500;
  }

  .hidden {
    display: none;
  }

  .progress {
    width: 100%;
    height: 8px;
    background: #ddd;
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 20px;
  }

  .progress-bar {
    height: 100%;
    width: 0;
    background: #FF7101;
    transition: width 0.3s;
  }

  @media (max-width: 500px) {
    .options {
      flex-direction: column;
    }
  }

  .result {
    text-align: center;
  }

  .result h3 {
    color: #FF7101;
  }
</style>

<div class="container">
  <div class="progress"><div class="progress-bar" id="progressBar"></div></div>
  <form id="quizForm">
    <div id="stepContainer"></div>

    <div class="buttons">
      <button type="button" id="prevBtn" class="hidden">Back</button>
      <button type="button" id="nextBtn">Next</button>
    </div>
  </form>
</div>

<script>
const steps = [
  {
    title: "1. Driving Habits (Weight: 25%)",
    weight: 25,
    questions: [
      "How often do you drive long distances?",
      "Do you mostly drive in urban or rural areas?",
      "How important is vehicle range to you?",
      "Do you frequently drive in heavy traffic?",
      "Would you describe your driving as regular and consistent?"
    ]
  },
  {
    title: "2. Budget & Cost (Weight: 20%)",
    weight: 20,
    questions: [
      "How concerned are you about the upfront cost of a vehicle?",
      "Would you consider higher upfront cost for lower long-term running cost?",
      "Are you open to government incentives or subsidies?",
      "Do you value fuel savings over purchase price?",
      "Is long-term maintenance cost a major factor in your decision?"
    ]
  },
  {
    title: "3. Environmental Awareness (Weight: 15%)",
    weight: 15,
    questions: [
      "How important is reducing your carbon footprint to you?",
      "Would you prioritize eco-friendliness over performance?",
      "Do you prefer supporting green or sustainable technologies?",
      "How likely are you to choose renewable energy options (e.g., home solar)?",
      "How concerned are you about vehicle emissions and pollution?"
    ]
  },
  {
    title: "4. Charging & Maintenance (Weight: 20%)",
    weight: 20,
    questions: [
      "Do you have access to home charging or plan to install one?",
      "How close is the nearest public charging station?",
      "Are you comfortable with longer charging times compared to refueling?",
      "How much do you value low maintenance vehicles?",
      "Do you prefer traditional servicing familiarity over modern systems?"
    ]
  },
  {
    title: "5. Lifestyle & Performance (Weight: 20%)",
    weight: 20,
    questions: [
      "Do you enjoy high-performance or fast-acceleration vehicles?",
      "How important is a quiet and smooth driving experience?",
      "Do you prioritize cargo space and versatility?",
      "How frequently do you use your vehicle for family or group travel?",
      "Are you attracted to advanced in-car technologies and digital features?"
    ]
  }
];

let currentStep = 0;

const form = document.getElementById("quizForm");
const container = document.getElementById("stepContainer");
const nextBtn = document.getElementById("nextBtn");
const prevBtn = document.getElementById("prevBtn");
const progressBar = document.getElementById("progressBar");

function renderStep(index) {
  const step = steps[index];
  let html = `<h2>${step.title}</h2>`;
  step.questions.forEach((q, i) => {
    html += `
      <div class="question">
        <label>${q}</label>
        <div class="options">
          ${[1,2,3,4,5].map(num => `
            <label><input type="radio" name="q${index}_${i}" value="${num}" required> ${num}</label>
          `).join("")}
        </div>
      </div>
    `;
  });
  container.innerHTML = html;
  updateProgress();
  prevBtn.classList.toggle("hidden", index === 0);
  nextBtn.textContent = index === steps.length - 1 ? "Submit" : "Next";
}

function updateProgress() {
  const progress = ((currentStep) / (steps.length - 1)) * 100;
  progressBar.style.width = progress + "%";
}

function calculateResult() {
  let totalScore = 0;
  let totalWeight = 0;
  steps.forEach((step, sIndex) => {
    const radios = form.querySelectorAll(`[name^="q${sIndex}_"]:checked`);
    let avg = 0;
    radios.forEach(r => avg += parseInt(r.value));
    avg /= step.questions.length;
    totalScore += avg * step.weight;
    totalWeight += step.weight;
  });

  const finalScore = (totalScore / (5 * totalWeight)) * 100;
  let type = "", interpretation = "";
  if (finalScore >= 85) {
    type = "Electric Vehicle (EV)";
    interpretation = "Highly suited for an EV.";
  } else if (finalScore >= 70) {
    type = "Hybrid Vehicle";
    interpretation = "Balanced suitability for hybrid technology.";
  } else {
    type = "Gas-powered Vehicle";
    interpretation = "More practical with traditional fuel.";
  }

  container.innerHTML = `
    <div class="result">
      <h2>Your Result</h2>
      <h3>${type}</h3>
      <p>Final Score: ${finalScore.toFixed(1)}%</p>
      <p>${interpretation}</p>
    </div>
  `;
  document.querySelector(".buttons").classList.add("hidden");
  progressBar.style.width = "100%";
}

nextBtn.addEventListener("click", () => {
  const currentQuestions = container.querySelectorAll("input[type=radio]");
  const groups = [...new Set([...currentQuestions].map(i => i.name))];
  const allAnswered = groups.every(g => form.querySelector(`input[name="${g}"]:checked`));
  if (!allAnswered) {
    alert("Please answer all questions before continuing.");
    return;
  }
  if (currentStep < steps.length - 1) {
    currentStep++;
    renderStep(currentStep);
  } else {
    calculateResult();
  }
});

prevBtn.addEventListener("click", () => {
  if (currentStep > 0) {
    currentStep--;
    renderStep(currentStep);
  }
});

renderStep(currentStep);
</script>
